{
    "sourceFile": "src/features/SearchHistory/components/SearchHistoryItem.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 11,
            "patches": [
                {
                    "date": 1716062337047,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1716062355814,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,8 +16,9 @@\n   history: SearchHistoryItemType;\n }> = ({ history }) => {\n   const deleteHistory = useDeleteSearchHistory();\n   const updateLocation = useSetLocationInfo();\n+  \n \n   function handleSearchButtonClick() {\n     updateLocation(history.locationInfo);\n   }\n"
                },
                {
                    "date": 1716062361343,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,15 +10,16 @@\n   useDeleteSearchHistory,\n   useSetLocationInfo,\n } from \"@/stores/weather/useWeatherStore.selectors\";\n import { formatISODateString } from \"@/utils/formatISODateString\";\n+import { useQueryClient } from \"@tanstack/react-query\";\n \n export const SearchHistoryItem: React.FC<{\n   history: SearchHistoryItemType;\n }> = ({ history }) => {\n   const deleteHistory = useDeleteSearchHistory();\n   const updateLocation = useSetLocationInfo();\n-  \n+  const queryClient = useQueryClient();\n \n   function handleSearchButtonClick() {\n     updateLocation(history.locationInfo);\n   }\n"
                },
                {
                    "date": 1716062375870,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,8 +20,9 @@\n   const updateLocation = useSetLocationInfo();\n   const queryClient = useQueryClient();\n \n   function handleSearchButtonClick() {\n+    queryClient.invalidateQueries(\"getWeatherQuery\");\n     updateLocation(history.locationInfo);\n   }\n \n   function handleDeleteButtonClick() {\n"
                },
                {
                    "date": 1716062389545,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n   const updateLocation = useSetLocationInfo();\n   const queryClient = useQueryClient();\n \n   function handleSearchButtonClick() {\n-    queryClient.invalidateQueries(\"getWeatherQuery\");\n+    queryClient.invalidateQueries([\"getWeatherQuery\"]);\n     updateLocation(history.locationInfo);\n   }\n \n   function handleDeleteButtonClick() {\n"
                },
                {
                    "date": 1716062421495,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n   const updateLocation = useSetLocationInfo();\n   const queryClient = useQueryClient();\n \n   function handleSearchButtonClick() {\n-    queryClient.invalidateQueries([\"getWeatherQuery\"]);\n+    queryClient.invalidateQueries({ queryKey: [] });\n     updateLocation(history.locationInfo);\n   }\n \n   function handleDeleteButtonClick() {\n"
                },
                {
                    "date": 1716062436125,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n   const updateLocation = useSetLocationInfo();\n   const queryClient = useQueryClient();\n \n   function handleSearchButtonClick() {\n-    queryClient.invalidateQueries({ queryKey: [] });\n+    await queryClient.invalidateQueries({ queryKey: [] });\n     updateLocation(history.locationInfo);\n   }\n \n   function handleDeleteButtonClick() {\n"
                },
                {
                    "date": 1716062444747,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n   const deleteHistory = useDeleteSearchHistory();\n   const updateLocation = useSetLocationInfo();\n   const queryClient = useQueryClient();\n \n-  function handleSearchButtonClick() {\n+  async function handleSearchButtonClick() {\n     await queryClient.invalidateQueries({ queryKey: [] });\n     updateLocation(history.locationInfo);\n   }\n \n"
                },
                {
                    "date": 1716062478488,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n   const updateLocation = useSetLocationInfo();\n   const queryClient = useQueryClient();\n \n   async function handleSearchButtonClick() {\n-    await queryClient.invalidateQueries({ queryKey: [] });\n+    queryClient.invalidateQueries({ queryKey: [] });\n     updateLocation(history.locationInfo);\n   }\n \n   function handleDeleteButtonClick() {\n"
                },
                {
                    "date": 1716062486580,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n   const deleteHistory = useDeleteSearchHistory();\n   const updateLocation = useSetLocationInfo();\n   const queryClient = useQueryClient();\n \n-  async function handleSearchButtonClick() {\n+  function handleSearchButtonClick() {\n     queryClient.invalidateQueries({ queryKey: [] });\n     updateLocation(history.locationInfo);\n   }\n \n"
                },
                {
                    "date": 1716062494452,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n   const updateLocation = useSetLocationInfo();\n   const queryClient = useQueryClient();\n \n   function handleSearchButtonClick() {\n-    queryClient.invalidateQueries({ queryKey: [] });\n+    void queryClient.invalidateQueries({ queryKey: [] });\n     updateLocation(history.locationInfo);\n   }\n \n   function handleDeleteButtonClick() {\n"
                },
                {
                    "date": 1716062550123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n   const updateLocation = useSetLocationInfo();\n   const queryClient = useQueryClient();\n \n   function handleSearchButtonClick() {\n-    void queryClient.invalidateQueries({ queryKey: [] });\n+    void queryClient.invalidateQueries({ queryKey: [\"getWeather\"] });\n     updateLocation(history.locationInfo);\n   }\n \n   function handleDeleteButtonClick() {\n"
                }
            ],
            "date": 1716062337047,
            "name": "Commit-0",
            "content": "import type React from \"react\";\n\nimport { Button } from \"@/components/ui/Button/Button\";\nimport { DeleteIconRound } from \"@/icons/DeleteIconRound\";\nimport { SearchIconRound } from \"@/icons/SearchIconRound\";\nimport type {\n  SearchHistoryItem as SearchHistoryItemType,\n} from \"@/stores/weather/slices/searchHistorySlice.types\";\nimport {\n  useDeleteSearchHistory,\n  useSetLocationInfo,\n} from \"@/stores/weather/useWeatherStore.selectors\";\nimport { formatISODateString } from \"@/utils/formatISODateString\";\n\nexport const SearchHistoryItem: React.FC<{\n  history: SearchHistoryItemType;\n}> = ({ history }) => {\n  const deleteHistory = useDeleteSearchHistory();\n  const updateLocation = useSetLocationInfo();\n\n  function handleSearchButtonClick() {\n    updateLocation(history.locationInfo);\n  }\n\n  function handleDeleteButtonClick() {\n    const element = document.getElementById(`history-item-${history.id}`);\n    if (element) {\n      element.classList.add(\"animate-fadeOut\");\n      setTimeout(() => deleteHistory(history.id), 500); // Duration matches the animation duration\n    } else {\n      deleteHistory(history.id); // Fallback in case element is not found\n    }\n  }\n\n  return (\n    <div\n      id={`history-item-${history.id}`}\n      className={`\n        mb-4 flex items-center justify-between rounded-2xl\n        bg-[rgba(26,26,26,0.5)] p-4 transition-opacity\n      `}\n    >\n      <div\n        className={`\n          grow\n\n          sm:flex sm:items-center sm:justify-between sm:pr-3\n        `}\n      >\n        <div\n          className={`\n            mb-[2px] text-sm font-normal text-white\n\n            sm:text-[1rem]\n          `}\n        >\n          {history.locationInfo.regionName}, {history.locationInfo.countryCode}\n        </div>\n\n        <div\n          className={`\n            text-[0.625rem] font-normal text-[rgba(255,255,255,0.5)]\n\n            sm:text-[0.875rem]\n          `}\n        >\n          {formatISODateString(history.timeStamp).toLowerCase()}\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-2\">\n        <Button\n          onClick={handleSearchButtonClick}\n          variant=\"ghost\"\n          size=\"icon\"\n          className={`\n            size-[2.125rem] p-0\n\n            hover:bg-white/[.3]\n          `}\n        >\n          <SearchIconRound className=\"size-full text-sm text-white\" />\n        </Button>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className={`\n            size-[2.125rem] p-0\n\n            hover:bg-white/[.3]\n          `}\n          onClick={handleDeleteButtonClick}\n        >\n          <DeleteIconRound className=\"size-full\" />\n        </Button>\n      </div>\n    </div>\n  );\n};\n"
        }
    ]
}